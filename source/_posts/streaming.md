---
title: Data Streaming at Scale in Azure
categories: [Data]
tags: [messaging, eventing, events, data streaming, streams]
date: 2019-08-28
---

## Overview
Many modern enterprise applications start with data generated by real world events like human interactions or regular sensor readings, and it's often the modern developer's job to design a system that will capture that data, move it quickly through some data pipeline, and then turn it into real insights that help the enterprise make decisions to improve business.

I'm going to generalize and call this concept _data streaming_. I'll focus in on the _streaming_ and isolate it from other data related topics such as _data persistence_ and _data analysis_.

Data streaming is an extremely common solution component, and there are a myriad of software tools that exist to fulfill it. In fact, there are so many tools, that it's often difficult to know where to start.

But fear not. The point of this article is to introduce you to the resources at your disposal to solve such a problem. I'll give affinity to Azure services, since the idea of exhaustively covering all data streaming services on the market overwhelms me.

## Azure Services Related to Data Streaming
Let's start with a list and brief discussion of each of the Azure resources that  have at least some connection to streaming data.

### Storage Queues
Not to be confused with _Service Bus_ Queues, Azure's Storage Queues are perhaps the most primitive and certainly the oldest queue structure available.

In case you're not familiar with the core concept of a queue, it would be good to explain that. A queue is a data structure that follows a _first-in first-out_ (FIFO) access pattern - meaning that if you put Thing A, Thing B, and then Thing C in in that order, and then you ask the queue for its next item, it will give you Thing A - first in... first out.

This primitive data structure is extremely handy in cloud-first applications where you want one working process to set aside tasks for one or more other processes to pick up and do.

Storage Queues are not as robust as some of the other services in Azure, but sometimes they are simply all you need.

### Service Bus Queues
Service Bus Queues are newer and far more robust than Storage Queues. There are some significant advantages including the ability to guarantee message ordering (there are some edge cases where Stor), role-based access, the use of the AMQP protocol instead of just HTTP, extensibility

To read up on the differences between Storage Queues and Service Bus Queues, read [Storage queues and Service Bus queues - compared and contrasted](https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted).

### Service Bus Topics
Queues are the solution when you want one and only one worker to take a message out of the queue and process it. Think about widgets coming down a conveyor belt with 2 workers tasked with stamping each widget. If one worker stamps a widget then it's done and the other worker should leave it alone.

Topics are quite different. Topics are the solution when you have messages that are occurring and one _or more_ parties are interested. Think about a magazine subscription where it's produced one time, but multiple people want to receive a copy. You often hear this referred to as a "publish/subscribe" pattern or simply "pubsub". In this case, messages are pushed into a _topic_ and zero to many parties are registered as being interested in that topic. Whenever a new messages lands, the interested parties are notified and can do their processing.

Service Bus Queues and Topics are intended as _messaging_ solutions. More on that later.

### Event Hub
Now let's take another view on processing data and look at _events_ instead of _messages_.

Event Hub is Azure's solution for facilitating massive scale event processing. It's ability to get data into Azure is staggering. The [feature page](https://azure.microsoft.com/en-us/services/event-hubs) states "millions of events per second".

### Event Grid
here

### Data Lake

### CosmosDB
here

### Stream Analytics
here

### Databricks
here

### Data Warehouse
here

### IoT Edge
here

### IoT Hub
here

### Power BI
here

## Ingestion
(As opposed to indigestion which comes later in the project.)

## Simple Producers

## Simple Consumers
console
container
functions
    sessions

## Stream Processing
    ASA
    Databricks
    Reactive Extensions and Reactor

latency
    link to the other blog post about measuring latency